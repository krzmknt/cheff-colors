version: 0.2

phases:
  install:
    runtime-versions:
      nodejs: 18
    commands:
      - npm install

  build:
    commands:
      - npx cdk deploy ${PROJECT_NAME}-${STAGE_NAME}-api
        -c stageName=$STAGE_NAME
        -c commitHash=$CODEBUILD_RESOLVED_SOURCE_VERSION
        --require-approval never
